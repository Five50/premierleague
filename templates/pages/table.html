{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "ALLSVENSKAN Insikter - Table 2024/25 Standings" %}{% endblock %}

{% block meta_description %}{% trans "View the current Allsvenskan table with ALLSVENSKAN Insikter. Live standings, points, goal difference, and team form for the 2024/25 season." %}{% endblock %}

{% block content %}
<div class="min-h-screen bg-slate-50">
    <!-- Page Header -->
    <div class="relative bg-gradient-to-br from-blue-500 via-blue-600 to-blue-400 text-white overflow-hidden pb-20">
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute inset-0" style="background-image: radial-gradient(circle at 25px 25px, white 2px, transparent 2px); background-size: 50px 50px;"></div>
        </div>

        <!-- Gradient Overlay -->
        <div class="absolute inset-0 bg-gradient-to-r from-blue-600/20 to-transparent"></div>

        <div class="container mx-auto px-4 py-16 relative">
            <div class="text-center">
                <div class="inline-flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 mb-6">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                    <span class="text-sm font-semibold">{% trans "2025/26 Season" %}</span>
                </div>

                <h1 class="text-5xl md:text-7xl font-black mb-6 bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent">
                    {% trans "Allsvenskan Table" %}
                </h1>

                <p class="text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto leading-relaxed">
                    {% trans "Current standings for the 2025/26 season with live updates, points, goal difference and recent form." %}
                </p>

                <!-- Featured Stats -->
                <div class="flex flex-wrap justify-center items-center space-x-8 mt-8 text-sm">
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <span>{% trans "16 Teams" %}</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></div>
                        <span>{% trans "240 Matches" %}</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
                        <span>{% trans "Live Updates" %}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Table Content - Overlapping Hero -->
    <div class="container mx-auto px-4 -mt-16 relative z-10">
        <!-- Season Info -->
        <div class="mb-8 text-center">
            <div class="inline-flex items-center space-x-4 pl-card">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-700">2025/26</div>
                    <div class="text-sm pl-text opacity-75">{% trans "Season" %}</div>
                </div>
                <div class="w-px h-8 bg-slate-200"></div>
                <div class="text-center">
                    <div class="text-sm font-semibold pl-text">{% trans "Last updated" %}</div>
                    <div class="text-xs pl-text opacity-75">{% now "j M Y H:i" %}</div>
                </div>
                {% if standings_available %}
                <div class="w-px h-8 bg-slate-200"></div>
                <div class="text-center">
                    <div class="text-lg font-bold pl-text">{{ standings|length }} {% trans "Teams" %}</div>
                    <div class="text-xs pl-text opacity-75">{% trans "Allsvenskan" %}</div>
                </div>
                {% endif %}
            </div>
        </div>

        {% if standings_available and standings %}
            <!-- League Table -->
            <div class="pl-card overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-slate-200 text-xs uppercase tracking-wide text-slate-500">
                                <th class="text-left py-4 px-2 font-semibold">#</th>
                                <th class="text-left py-4 px-4 font-semibold">{% trans "Team" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "P" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "W" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "D" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "L" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "GF" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "GA" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "GD" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "Pts" %}</th>
                                <th class="text-center py-4 px-2 font-semibold">{% trans "Form" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for team_data in standings %}
                                <tr class="border-b border-slate-100 hover:bg-slate-50 transition-colors
                                    {% if forloop.counter <= 3 %}
                                        bg-green-50 border-l-4 border-green-500
                                    {% elif forloop.counter <= 6 %}
                                        bg-blue-50 border-l-4 border-blue-500
                                    {% elif forloop.counter >= 14 %}
                                        bg-red-50 border-l-4 border-red-500
                                    {% endif %}">

                                    <td class="py-4 px-2 text-sm font-bold">{{ forloop.counter }}</td>

                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-3">
                                            {% if team_data.team.logo %}
                                                <img src="{{ team_data.team.logo }}" alt="{{ team_data.team.name }}" class="w-8 h-8 object-contain">
                                            {% else %}
                                                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                                                    <span class="text-white text-xs font-bold">{{ team_data.team.name|slice:":2"|upper }}</span>
                                                </div>
                                            {% endif %}
                                            <div>
                                                <div class="font-semibold text-slate-900">{{ team_data.team.name }}</div>
                                                <div class="text-xs text-slate-500">{{ team_data.team.founded|default:"" }}</div>
                                            </div>
                                        </div>
                                    </td>

                                    <td class="text-center py-4 px-2 text-sm">{{ team_data.all.played }}</td>
                                    <td class="text-center py-4 px-2 text-sm">{{ team_data.all.win }}</td>
                                    <td class="text-center py-4 px-2 text-sm">{{ team_data.all.draw }}</td>
                                    <td class="text-center py-4 px-2 text-sm">{{ team_data.all.lose }}</td>
                                    <td class="text-center py-4 px-2 text-sm">{{ team_data.all.goals.for }}</td>
                                    <td class="text-center py-4 px-2 text-sm">{{ team_data.all.goals.against }}</td>
                                    <td class="text-center py-4 px-2 text-sm
                                        {% if team_data.goalsDiff > 0 %}text-green-600{% elif team_data.goalsDiff < 0 %}text-red-600{% endif %}">
                                        {% if team_data.goalsDiff > 0 %}+{% endif %}{{ team_data.goalsDiff }}
                                    </td>
                                    <td class="text-center py-4 px-2 font-bold text-blue-600">{{ team_data.points }}</td>

                                    <td class="text-center py-4 px-2">
                                        {% if team_data.form %}
                                            <div class="flex justify-center space-x-1">
                                                {% for result in team_data.form|slice:":5" %}
                                                    <div class="w-5 h-5 rounded-full text-xs flex items-center justify-center text-white font-bold
                                                        {% if result == 'W' %}bg-green-500
                                                        {% elif result == 'D' %}bg-yellow-500
                                                        {% elif result == 'L' %}bg-red-500
                                                        {% else %}bg-gray-400{% endif %}">
                                                        {{ result }}
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        {% endif %}
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="11" class="text-center py-8 text-slate-500">
                                        {% trans "No standings data available" %}
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Legend -->
            <div class="mt-6 pl-card">
                <h3 class="font-semibold text-slate-900 mb-4">{% trans "Qualification Zones" %}</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-green-500 rounded"></div>
                        <span>{% trans "Champions League (1-3)" %}</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-blue-500 rounded"></div>
                        <span>{% trans "Europa Conference League (4-6)" %}</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 bg-red-500 rounded"></div>
                        <span>{% trans "Relegation (14-16)" %}</span>
                    </div>
                </div>
            </div>

        {% else %}
            <!-- Error/No Data State -->
            <div class="pl-card text-center py-16">
                <div class="text-6xl mb-4">⚽</div>
                <h2 class="text-2xl font-bold text-slate-900 mb-4">
                    {% if not standings_available %}
                        {% trans "Unable to Load Table" %}
                    {% else %}
                        {% trans "No Table Data Available" %}
                    {% endif %}
                </h2>
                <p class="text-slate-600 mb-8">
                    {% if not standings_available %}
                        {% trans "We're having trouble connecting to the live data. Please try refreshing the page." %}
                    {% else %}
                        {% trans "Table data is temporarily unavailable. Please check back later." %}
                    {% endif %}
                </p>
                <button onclick="location.reload()" class="pl-button">
                    {% trans "Refresh Page" %}
                </button>
            </div>
        {% endif %}

        <!-- League Insights Section -->
        {% if standings_available %}
        <div class="mt-12">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-slate-900">{% trans "League Insights & Statistics" %}</h2>
                <div class="text-sm text-slate-600">
                    <span class="inline-flex items-center">
                        <div class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></div>
                        {% trans "Live Data" %}
                    </span>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
                <div class="pl-card text-center">
                    <div class="text-2xl font-bold text-blue-600 mb-1">{{ standings|length }}</div>
                    <div class="text-xs text-slate-600">{% trans "Teams" %}</div>
                </div>
                <div class="pl-card text-center">
                    <div class="text-2xl font-bold text-green-600 mb-1">30</div>
                    <div class="text-xs text-slate-600">{% trans "Matches/Team" %}</div>
                </div>
                <div class="pl-card text-center">
                    <div class="text-2xl font-bold text-yellow-600 mb-1">240</div>
                    <div class="text-xs text-slate-600">{% trans "Total Matches" %}</div>
                </div>
                <div class="pl-card text-center">
                    <div class="text-2xl font-bold text-purple-600 mb-1">2025/26</div>
                    <div class="text-xs text-slate-600">{% trans "Season" %}</div>
                </div>
            </div>

            <!-- Top Performers -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Top Scorers -->
                <div class="pl-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center">
                            <span class="text-2xl mr-2">⚽</span>
                            {% trans "Top Scorers" %}
                        </h3>
                        <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium">{% trans "Golden Boot Race" %}</span>
                    </div>

                    <div class="space-y-4">
                        {% if api_data_available and top_scorers %}
                            {% for scorer in top_scorers|slice:":5" %}
                                <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-slate-50 transition-colors">
                                    <div class="text-sm font-bold
                                        {% if forloop.counter == 1 %}text-yellow-600
                                        {% elif forloop.counter == 2 %}text-gray-500
                                        {% elif forloop.counter == 3 %}text-orange-600
                                        {% else %}text-blue-600{% endif %}">
                                        {{ forloop.counter }}.
                                    </div>
                                    {% if scorer.player.photo %}
                                        <img src="{{ scorer.player.photo }}" alt="{{ scorer.player.name }}" class="w-10 h-10 rounded-full object-cover">
                                    {% else %}
                                        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs font-bold">{{ scorer.player.name|slice:":1"|upper }}</span>
                                        </div>
                                    {% endif %}
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-slate-900 truncate">{{ scorer.player.name }}</div>
                                        <div class="text-xs text-slate-500">{{ scorer.statistics.0.team.name }}</div>
                                    </div>
                                    <div class="text-lg font-bold
                                        {% if forloop.counter == 1 %}text-yellow-600
                                        {% elif forloop.counter == 2 %}text-gray-500
                                        {% elif forloop.counter == 3 %}text-orange-600
                                        {% else %}text-blue-600{% endif %}">
                                        {{ scorer.statistics.0.goals.total|default:0 }}
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <!-- Fallback static data -->
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-yellow-600">1.</div>
                                <div class="w-10 h-10 bg-sky-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">V</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Viktor Gyökeres</div>
                                    <div class="text-xs text-slate-500">Malmö FF</div>
                                </div>
                                <div class="text-lg font-bold text-yellow-600">18</div>
                            </div>
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-gray-500">2.</div>
                                <div class="w-10 h-10 bg-black rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">S</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Sebastian Andersson</div>
                                    <div class="text-xs text-slate-500">AIK</div>
                                </div>
                                <div class="text-lg font-bold text-gray-500">14</div>
                            </div>
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-orange-600">3.</div>
                                <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">M</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Marcus Berg</div>
                                    <div class="text-xs text-slate-500">Hammarby IF</div>
                                </div>
                                <div class="text-lg font-bold text-orange-600">12</div>
                            </div>
                        {% endif %}
                    </div>

                    <div class="mt-4 pt-4 border-t border-slate-200">
                        <a href="{% url 'players' %}" class="text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center">
                            {% trans "View All Players" %}
                            <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Most Assists -->
                <div class="pl-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center">
                            <span class="text-2xl mr-2">🎯</span>
                            {% trans "Most Assists" %}
                        </h3>
                        <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium">{% trans "Playmakers" %}</span>
                    </div>

                    <div class="space-y-4">
                        {% if api_data_available and top_assists %}
                            {% for player in top_assists|slice:":5" %}
                                <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-slate-50 transition-colors">
                                    <div class="text-sm font-bold
                                        {% if forloop.counter == 1 %}text-yellow-600
                                        {% elif forloop.counter == 2 %}text-gray-500
                                        {% elif forloop.counter == 3 %}text-orange-600
                                        {% else %}text-blue-600{% endif %}">
                                        {{ forloop.counter }}.
                                    </div>
                                    {% if player.player.photo %}
                                        <img src="{{ player.player.photo }}" alt="{{ player.player.name }}" class="w-10 h-10 rounded-full object-cover">
                                    {% else %}
                                        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs font-bold">{{ player.player.name|slice:":1"|upper }}</span>
                                        </div>
                                    {% endif %}
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-slate-900 truncate">{{ player.player.name }}</div>
                                        <div class="text-xs text-slate-500">{{ player.statistics.0.team.name }}</div>
                                    </div>
                                    <div class="text-lg font-bold
                                        {% if forloop.counter == 1 %}text-yellow-600
                                        {% elif forloop.counter == 2 %}text-gray-500
                                        {% elif forloop.counter == 3 %}text-orange-600
                                        {% else %}text-blue-600{% endif %}">
                                        {{ player.statistics.0.goals.assists|default:0 }}
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <!-- Fallback static data -->
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-yellow-600">1.</div>
                                <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">L</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Lars Magnusson</div>
                                    <div class="text-xs text-slate-500">Hammarby IF</div>
                                </div>
                                <div class="text-lg font-bold text-yellow-600">9</div>
                            </div>
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-gray-500">2.</div>
                                <div class="w-10 h-10 bg-sky-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">A</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Anders Svensson</div>
                                    <div class="text-xs text-slate-500">Malmö FF</div>
                                </div>
                                <div class="text-lg font-bold text-gray-500">8</div>
                            </div>
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-orange-600">3.</div>
                                <div class="w-10 h-10 bg-blue-800 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">K</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Kalle Holmberg</div>
                                    <div class="text-xs text-slate-500">Djurgården IF</div>
                                </div>
                                <div class="text-lg font-bold text-orange-600">7</div>
                            </div>
                        {% endif %}
                    </div>

                    <div class="mt-4 pt-4 border-t border-slate-200">
                        <a href="{% url 'players' %}" class="text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center">
                            {% trans "View All Midfielders" %}
                            <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Best Goalkeepers -->
                <div class="pl-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold text-slate-900 flex items-center">
                            <span class="text-2xl mr-2">🧤</span>
                            {% trans "Best Goalkeepers" %}
                        </h3>
                        <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium">{% trans "Clean Sheets" %}</span>
                    </div>

                    <div class="space-y-4">
                        {% if api_data_available and clean_sheets %}
                            {% for keeper in clean_sheets|slice:":5" %}
                                <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-slate-50 transition-colors">
                                    <div class="text-sm font-bold
                                        {% if forloop.counter == 1 %}text-yellow-600
                                        {% elif forloop.counter == 2 %}text-gray-500
                                        {% elif forloop.counter == 3 %}text-orange-600
                                        {% else %}text-blue-600{% endif %}">
                                        {{ forloop.counter }}.
                                    </div>
                                    {% if keeper.player.photo %}
                                        <img src="{{ keeper.player.photo }}" alt="{{ keeper.player.name }}" class="w-10 h-10 rounded-full object-cover">
                                    {% else %}
                                        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                                            <span class="text-white text-xs font-bold">{{ keeper.player.name|slice:":1"|upper }}</span>
                                        </div>
                                    {% endif %}
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-slate-900 truncate">{{ keeper.player.name }}</div>
                                        <div class="text-xs text-slate-500">{{ keeper.statistics.0.team.name }}</div>
                                    </div>
                                    <div class="text-lg font-bold
                                        {% if forloop.counter == 1 %}text-yellow-600
                                        {% elif forloop.counter == 2 %}text-gray-500
                                        {% elif forloop.counter == 3 %}text-orange-600
                                        {% else %}text-blue-600{% endif %}">
                                        {{ keeper.statistics.0.goals.conceded|default:0 }}
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <!-- Fallback static data -->
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-yellow-600">1.</div>
                                <div class="w-10 h-10 bg-black rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">O</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Oscar Lindqvist</div>
                                    <div class="text-xs text-slate-500">AIK</div>
                                </div>
                                <div class="text-lg font-bold text-yellow-600">11</div>
                            </div>
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-gray-500">2.</div>
                                <div class="w-10 h-10 bg-sky-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">J</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Johan Dahlin</div>
                                    <div class="text-xs text-slate-500">Malmö FF</div>
                                </div>
                                <div class="text-lg font-bold text-gray-500">9</div>
                            </div>
                            <div class="flex items-center space-x-3 p-3 rounded-lg">
                                <div class="text-sm font-bold text-orange-600">3.</div>
                                <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center">
                                    <span class="text-white text-xs font-bold">B</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-slate-900">Blazej Augustyn</div>
                                    <div class="text-xs text-slate-500">Hammarby IF</div>
                                </div>
                                <div class="text-lg font-bold text-orange-600">8</div>
                            </div>
                        {% endif %}
                    </div>

                    <div class="mt-4 pt-4 border-t border-slate-200">
                        <a href="{% url 'players' %}" class="text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center">
                            {% trans "View All Goalkeepers" %}
                            <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Additional Insights -->
            <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Championship Race Insight -->
                <div class="pl-card">
                    <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">🏆</span>
                        {% trans "Championship Race" %}
                    </h3>
                    <div class="prose prose-sm text-slate-700">
                        <p>{% trans "The title race is heating up with several teams in contention. The top 3 positions offer Champions League qualification, making every match crucial as teams fight for European football next season." %}</p>
                        <div class="mt-4 text-xs text-slate-500">
                            {% trans "Updated after each matchday with live standings" %}
                        </div>
                    </div>
                </div>

                <!-- Relegation Battle -->
                <div class="pl-card">
                    <h3 class="text-lg font-bold text-slate-900 mb-4 flex items-center">
                        <span class="text-2xl mr-2">⚠️</span>
                        {% trans "Relegation Battle" %}
                    </h3>
                    <div class="prose prose-sm text-slate-700">
                        <p>{% trans "The bottom three teams face relegation to Superettan. With several teams separated by just a few points, the fight to stay in Sweden's top division will go down to the final matches." %}</p>
                        <div class="mt-4 text-xs text-slate-500">
                            {% trans "Teams in positions 14-16 are relegated" %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- SEO Content Section -->
        <div class="mt-16 mb-12">
            <div class="pl-card">
                <div class="prose prose-lg max-w-none">
                    <h2 class="text-3xl font-bold text-slate-900 mb-8">{% trans "Allsvenskan Table 2025/26 - Complete Guide" %}</h2>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div>
                            <h3 class="text-xl font-semibold text-slate-900 mb-4">{% trans "About the Allsvenskan Table" %}</h3>
                            <p class="text-slate-700 mb-4">
                                {% trans "The Allsvenskan table shows the current standings for Sweden's premier football league for the 2025/26 season. Our live table updates automatically with the latest results from all 16 teams competing for the championship title and European qualification spots." %}
                            </p>
                            <p class="text-slate-700 mb-4">
                                {% trans "Teams are ranked by total points, with goal difference and goals scored used as tiebreakers. The table includes detailed statistics like matches played, wins, draws, losses, goals for, goals against, and recent form to give you complete insight into each team's performance." %}
                            </p>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold text-slate-900 mb-4">{% trans "European Qualification & Relegation" %}</h3>
                            <p class="text-slate-700 mb-4">
                                {% trans "The top three teams in the Allsvenskan table qualify for European competitions. The champions and runners-up earn spots in the Champions League qualifying rounds, while third place enters the Europa Conference League qualifiers." %}
                            </p>
                            <p class="text-slate-700 mb-4">
                                {% trans "At the bottom of the table, the final three teams (positions 14-16) are relegated to Superettan, Sweden's second tier. This makes every position in the table crucial for teams fighting to stay in the top division." %}
                            </p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-green-50 p-6 rounded-lg border border-green-200">
                            <h4 class="font-semibold text-green-900 mb-2">{% trans "Champions League" %}</h4>
                            <p class="text-sm text-green-800">{% trans "Positions 1-2 qualify for Champions League qualifying rounds" %}</p>
                        </div>
                        <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                            <h4 class="font-semibold text-blue-900 mb-2">{% trans "Conference League" %}</h4>
                            <p class="text-sm text-blue-800">{% trans "Position 3 qualifies for Europa Conference League" %}</p>
                        </div>
                        <div class="bg-red-50 p-6 rounded-lg border border-red-200">
                            <h4 class="font-semibold text-red-900 mb-2">{% trans "Relegation" %}</h4>
                            <p class="text-sm text-red-800">{% trans "Positions 14-16 are relegated to Superettan" %}</p>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold text-slate-900 mb-4">{% trans "How to Read the Allsvenskan Table" %}</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="text-center p-4 bg-slate-50 rounded-lg">
                            <div class="font-bold text-slate-900">P</div>
                            <div class="text-xs text-slate-600">{% trans "Matches Played" %}</div>
                        </div>
                        <div class="text-center p-4 bg-slate-50 rounded-lg">
                            <div class="font-bold text-slate-900">W-D-L</div>
                            <div class="text-xs text-slate-600">{% trans "Wins-Draws-Losses" %}</div>
                        </div>
                        <div class="text-center p-4 bg-slate-50 rounded-lg">
                            <div class="font-bold text-slate-900">GF-GA</div>
                            <div class="text-xs text-slate-600">{% trans "Goals For-Against" %}</div>
                        </div>
                        <div class="text-center p-4 bg-slate-50 rounded-lg">
                            <div class="font-bold text-slate-900">GD</div>
                            <div class="text-xs text-slate-600">{% trans "Goal Difference" %}</div>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold text-slate-900 mb-4">{% trans "Key Teams to Watch" %}</h3>
                    <p class="text-slate-700 mb-4">
                        {% trans "Traditional powerhouses like Malmö FF, AIK, and Hammarby IF are always contenders for the title and European spots. Teams like Djurgården, IFK Göteborg, and BK Häcken have also shown strong performances in recent seasons and will be looking to challenge for top positions in the table." %}
                    </p>

                    <h3 class="text-xl font-semibold text-slate-900 mb-4">{% trans "Live Updates & Statistics" %}</h3>
                    <p class="text-slate-700 mb-4">
                        {% trans "Our Allsvenskan table updates in real-time with live scores and statistics. You can track your favorite team's progress throughout the season, view detailed form guides, and analyze goal statistics to understand which teams are performing best in Sweden's top football division." %}
                    </p>

                    <div class="mt-8 p-6 bg-blue-50 rounded-lg border border-blue-200">
                        <h4 class="font-semibold text-blue-900 mb-2">{% trans "More Allsvenskan Coverage" %}</h4>
                        <p class="text-sm text-blue-800 mb-4">{% trans "Explore more comprehensive coverage of Swedish football on our site:" %}</p>
                        <div class="flex flex-wrap gap-2">
                            <a href="{% url 'teams' %}" class="inline-block px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors">{% trans "All Teams" %}</a>
                            <a href="{% url 'fixtures' %}" class="inline-block px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors">{% trans "Fixtures & Results" %}</a>
                            <a href="{% url 'players' %}" class="inline-block px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors">{% trans "Top Players" %}</a>
                            <a href="{% url 'top-scorers' %}" class="inline-block px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors">{% trans "Top Scorers" %}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Auto-refresh functionality
function refreshStandings() {
    fetch('{% url "api-standings" %}')
        .then(response => response.json())
        .then(data => {
            if (data.success && data.standings.length > 0) {
                console.log('Standings updated:', data.standings.length, 'teams');
                // Could implement live table updates here
            }
        })
        .catch(error => {
            console.error('Error refreshing standings:', error);
        });
}

// Refresh every 5 minutes
setInterval(refreshStandings, 300000);

// Initial load
document.addEventListener('DOMContentLoaded', function() {
    console.log('Allsvenskan table loaded with live API data');
});
</script>
{% endblock %}